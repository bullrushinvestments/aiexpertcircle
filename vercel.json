interface BuildCommand {
    command: string;
    output?: string;
}

interface EnvVariables {
    [key: string]: string | undefined;
}

interface HeaderRule {
    source: string;
    headers: Array<{ key: string; value: string }>;
}

interface CacheStrategy {
    ignoreUrlParametersMatching?: Array<string>;
    immutableFiles?: Array<string>;
    browserCacheTtl?: number;
    edgeCacheTtl?: number;
    paths?: Array<string>;
}

interface FrameworkSettings {
    vercel?: { [key: string]: any };
    netlify?: { [key: string]: any };
}

interface DeployConfig {
    build: BuildCommand;
    env: EnvVariables;
    headers: Array<HeaderRule>;
    cache: CacheStrategy;
    framework: FrameworkSettings;
}

export const deployConfig: DeployConfig = {
    build: {
        command: "next build && next export",
        output: ".out"
    },
    env: {
        NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL,
        NEXT_PUBLIC_STRIPE_KEY: process.env.NEXT_PUBLIC_STRIPE_KEY
    },
    headers: [
        {
            source: "/(.*)",
            headers: [
                { key: "Strict-Transport-Security", value: "max-age=31536000; includeSubDomains; preload" },
                { key: "X-Frame-Options", value: "DENY" },
                { key: "X-XSS-Protection", value: "1; mode=block" }
            ]
        }
    ],
    cache: {
        ignoreUrlParametersMatching: [".*", "version"],
        immutableFiles: ["static/*"],
        browserCacheTtl: 3600,
        edgeCacheTtl: 604800
    },
    framework: {
        vercel: { buildCommand: "next build", startCommand: "next export" },
        netlify: { buildContext: "production" }
    }
};

interface BuildCommand {
    command: string;
    output?: string;
}

interface EnvVariables {
    [key: string]: string | undefined;
}

interface HeaderRule {
    source: string;
    headers: Array<{ key: string; value: string }>;
}

interface CacheStrategy {
    ignoreUrlParametersMatching?: Array<string>;
    immutableFiles?: Array<string>;
    browserCacheTtl?: number;
    edgeCacheTtl?: number;
    paths?: Array<string>;
}

interface FrameworkSettings {
    vercel?: { [key: string]: any };
    netlify?: { [key: string]: any };
}

interface DeployConfig {
    build: BuildCommand;
    env: EnvVariables;
    headers: Array<HeaderRule>;
    cache: CacheStrategy;
    framework: FrameworkSettings;
}

export const deployConfig: DeployConfig = {
    build: {
        command: "next build && next export",
        output: ".out"
    },
    env: {
        NEXT_PUBLIC_API_URL: process.env.NEXT_PUBLIC_API_URL,
        NEXT_PUBLIC_STRIPE_KEY: process.env.NEXT_PUBLIC_STRIPE_KEY
    },
    headers: [
        {
            source: "/(.*)",
            headers: [
                { key: "Strict-Transport-Security", value: "max-age=31536000; includeSubDomains; preload" },
                { key: "X-Frame-Options", value: "DENY" },
                { key: "X-XSS-Protection", value: "1; mode=block" }
            ]
        }
    ],
    cache: {
        ignoreUrlParametersMatching: [".*", "version"],
        immutableFiles: ["static/*"],
        browserCacheTtl: 3600,
        edgeCacheTtl: 604800
    },
    framework: {
        vercel: { buildCommand: "next build", startCommand: "next export" },
        netlify: { buildContext: "production" }
    }
};